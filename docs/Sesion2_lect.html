<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Jesús Esteban Hernández">
<meta name="dcterms.date" content="2022-02-12">

<title>Bioestadística - Máster UE Máster en Fisioterapia Neurológica  Módulo III. Metodología de la investigación.</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Bioestadística</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./about.html">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./Sesion1_lect.html">
 <span class="menu-text">Máster UE Máster en Fisioterapia Neurológica <br> Módulo III. Metodología de la investigación.</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./Sesion2_lect.html" aria-current="page">
 <span class="menu-text">Máster UE Máster en Fisioterapia Neurológica <br> Módulo III. Metodología de la investigación.</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./Sesion3_lect.html">
 <span class="menu-text">Máster UE Máster en Fisioterapia Neurológica <br> Módulo III. Metodología de la investigación.</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html">
 <span class="menu-text">Home2</span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Máster UE Máster en Fisioterapia Neurológica <br> Módulo III. Metodología de la investigación.</h1>
<p class="subtitle lead">Bloque Estadística Descriptiva e Inferencial. Sesión P2</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Jesús Esteban Hernández </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">February 12, 2022</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<div class="cell">

<style type="text/css">
<style type="text/css">
  
  .TOC {
    left:0;
    width:200px;
    margin-left: 0px;
    right: 2px;
    margin: 2px 20px 20px 0px;
    color: red;
    font-size: 2px;
  }

  .main-container {
  
  width:1800px !important;
  margin-left: 10px;
  margin-right: 10px;
  
}

body {
  font-size: 14pt;
  font-family: Helvetica;
  <!-- color: red; -->
  <!-- background-color: olive; -->
  
}

h1 {
  font-size: 34px;
}

h2 {
  font-size: 20px;
  color: red;
  text-indent:10px;

}

h3 {
  font-size: 20px;
  color: blue;
  text-indent:15px;

}


h4 {
  font-size: 20px;
  color: green;
  text-indent:20px;

}

tocify-header {
    text-indent: initial;
}

.gt_table {
  margin-left: 10px !important;
  margin-right: 10px !important;
  width: auto !important;
  
}


</style></style>


</div>
<div class="column" data-align="left" style="width:1800px;">
<p>Recuerda siempre cómo <em>“piensa”</em> R.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="pics/como_piensa_R.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Cómo piensa R</figcaption><p></p>
</figure>
</div>
<section id="sesión-p2-introducción-a-rrstudio." class="level1">
<h1>Sesión P2 Introducción a R+RStudio.</h1>
<p>Este documento no aborda aspectos como la instalación de R y RStudio, aspectos bien cubiertos en muchos otros recursos, algunos mencionados en la bibliografía.</p>
<p>El siguiente esquema trata de representar el flujo de trabajo habitual en cualquier proyecto de data science independientemente de su envergadura.</p>
<p>En la preparación de cualquier trabajo de investigación en el que nosotros nos encarguemos del análisis pasaremos por todas o casi todas estas fases.</p>
<p>En sentido estricto, el análisis estadístico sería el ciclo Transform-Visualise-Model, pero es imposible llegar a estas fases si no se completan los pasos anteriores. Por otro lado, sería extraño realizar un análisis para no comunicarlo, por lo que, aunque las siguientes notas no siguen exactamente este esquema, es importante tratar de pensar a qué fase corresponde todo lo que veremos en la parte práctica.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="pics/datascience_proj.png" class="img-fluid figure-img" style="width:50.0%"></p>
<p></p><figcaption class="figure-caption">Data Science WorkFlow</figcaption><p></p>
</figure>
</div>
<section id="aspectos-básicos-sobre-funcionamiento-de-r." class="level2">
<h2 class="anchored" data-anchor-id="aspectos-básicos-sobre-funcionamiento-de-r.">Aspectos básicos sobre funcionamiento de R.</h2>
<section id="por-qué-utilizar-r-para-analizar-los-datos-de-tu-investigación" class="level3">
<h3 class="anchored" data-anchor-id="por-qué-utilizar-r-para-analizar-los-datos-de-tu-investigación">¿Por qué utilizar R para analizar los datos de tu investigación?</h3>
<section id="ventajas" class="level4">
<h4 class="anchored" data-anchor-id="ventajas">Ventajas:</h4>
<ul>
<li>Código vs.&nbsp;ventanas. (En realidad en SPSS, Stata, SAS también se hacer todo utilizando código)</li>
<li>Reproducibilidad (interna y externa).</li>
<li>Replicabilidad.</li>
<li>Velocidad.</li>
<li>Ayuda de la comunidad (software libre).</li>
<li>Multitud de recursos.</li>
<li>Nadie te acusará de estar pirateando software.</li>
<li>Una vez conoces los fundamentos, puedes crecer lo que desees.</li>
</ul>
</section>
<section id="desventaja." class="level4">
<h4 class="anchored" data-anchor-id="desventaja.">Desventaja.</h4>
<ul>
<li>Curva de aprendizaje lenta en comparación con las <em>ventanas</em>.</li>
</ul>
</section>
</section>
<section id="instalación-de-r-y-rstudio." class="level3">
<h3 class="anchored" data-anchor-id="instalación-de-r-y-rstudio.">Instalación de R y RStudio.</h3>
<p>Es conveniente instalar R y luego RStudio.</p>
<p>Instalar R desde aquí: <a href="https://cran.r-project.org/" class="uri">https://cran.r-project.org/</a> Instalar RStudio Desktop desde aquí: <a href="https://posit.co/downloads/" class="uri">https://posit.co/downloads/</a></p>
<p>Para detalles sobre la instalación y otros aspectos básicos, <a href="https://anabelforte.com/2022/11/20/empezando-en-r-con-rstudio/">este recurso</a> creado por Anabel Forte Deltell (más conocida como BayesAna) <a href="https://twitter.com/AnaBayes"><img src="https://img.shields.io/twitter/url/https/twitter.com/AnaBayes.svg?style=social&amp;label=Follow%20%40AnaBayes" class="img-fluid" alt="Twitter URL"></a> es un buen punto de arranque.</p>
</section>
<section id="visión-global-en-rstudio." class="level3">
<h3 class="anchored" data-anchor-id="visión-global-en-rstudio.">Visión global en RStudio.</h3>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="pics/panelesRstudio.png" class="img-fluid figure-img" style="width:200.0%"></p>
<p></p><figcaption class="figure-caption">Paneles en RStudio</figcaption><p></p>
</figure>
</div>
<section id="conceptos-básicos-para-comenzar-a-trabajar." class="level4">
<h4 class="anchored" data-anchor-id="conceptos-básicos-para-comenzar-a-trabajar.">Conceptos básicos para comenzar a trabajar.</h4>
<ul>
<li>Workspace, directorio de trabajo , Imagen (.RData).</li>
<li>Paneles: Console, Script,Environment/History/Connection/Tutorial .</li>
<li>Métodos abreviados de teclado. Ctrl+Intro, Ctrl+Shift+C, Ctrl+Shift+N…</li>
<li>Cómo instalar bibliotecas (library).</li>
<li>Cómo abrir o llamar a una biblioteca: require(), library()</li>
<li>Cómo llamar a las funciones de una biblioteca.</li>
<li>Recordar que la posición es relevante al introducir argumentos.</li>
<li>Organización del script: Comentar, Outline, ejecución de líneas.</li>
<li>Cómo pedir ayuda en Rstudio y en internet.</li>
</ul>
</section>
</section>
</section>
<section id="primeros-pasos." class="level2">
<h2 class="anchored" data-anchor-id="primeros-pasos.">Primeros pasos.</h2>
<section id="recordando-cómo-piensa-r." class="level3">
<h3 class="anchored" data-anchor-id="recordando-cómo-piensa-r.">Recordando cómo <em>“piensa”</em> R.</h3>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="pics/como_piensa_R.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Cómo piensa R</figcaption><p></p>
</figure>
</div>
<section id="workspace-directorio-de-trabajo-imagen-.rdata." class="level4">
<h4 class="anchored" data-anchor-id="workspace-directorio-de-trabajo-imagen-.rdata.">Workspace, directorio de trabajo , Imagen (.RData).</h4>
<ul>
<li>Paneles: Console, Script,Environment/History/Connection/Tutorial .</li>
<li>Métodos abreviados de teclado. Ctrl+Intro, Ctrl+Shift+C, Ctrl+Shift+N…</li>
<li>Cómo instalar bibliotecas (library).</li>
<li>Cómo abrir o llamar a una biblioteca: require(), library()</li>
<li>Cómo llamar a las funciones de una biblioteca.</li>
<li>Recordar que la posición es relevante al introducir argumentos.</li>
<li>Organización del script: Comentar, Outline, ejecución de líneas.</li>
<li>Cómo pedir ayuda en Rstudio y en internet.</li>
</ul>
<section id="section" class="level14">
<p class="heading"></p>
</section>
</section>
</section>
<section id="uso-de-la-ayuda-de-r-help-o-." class="level3">
<h3 class="anchored" data-anchor-id="uso-de-la-ayuda-de-r-help-o-.">Uso de la ayuda de R: help, ? o ??.</h3>
<ul>
<li>help.start() #Abre el navegador (solo si tenemos la ayuda html instalada)</li>
<li>help.search(“normal”) # Busca términos relacionados.</li>
</ul>
<p>Cómo consultar la ayuda de R:</p>
<ul>
<li><p>? Consulta de ayuda para funciones. <em>help(stats)</em> es lo mismo que <em>?stats</em>.</p></li>
<li><p>?? busca el texto texto en las páginas de ayuda <em>??stats</em>.</p></li>
<li><p>Si se trata de caracteres o de expresiones reservadas porque se utilizan en operaciones básicas (como <em>+</em>) o en el interior de otras funciones s (como <em>if</em> ), es necesario rodear la expresión con “” para que devuelva la ayuda.</p></li>
<li><p>Correcto <em>help(“if”) o ?“if”</em> vs.&nbsp;Incorrecto: <em>help(if)</em> p <em>?if</em></p></li>
</ul>
</section>
<section id="instalar-paquetes-y-llamarlos-no-son-la-misma-cosa." class="level3">
<h3 class="anchored" data-anchor-id="instalar-paquetes-y-llamarlos-no-son-la-misma-cosa.">Instalar paquetes y llamarlos no son la misma cosa.</h3>
<p>Cuando explico este tema, suelo utilizar el ejemplo que sugieren los nombres que vamos a utilizar, solo que en otro contexto.</p>
<p>Instalar la librería (<em>install.packages(‘library_name’)</em>) significa ir a la tienda y comprar la biblioteca (library) con los libros incluidos. Cargarla (<em>library(library_name)</em>) o llamarla (<em>require(library_name)</em>) sería equivalente a abrir la librería y ponerla a disposición del usuario. Llamar a una de las funciones que contiene sería equivalente a utilizar uno de los libros (<em>function_name(args,…)</em>), libro que puedo usar de muchas formas, siempre que conozca los los <em>argumentos</em> para poder hacerlo de la forma que yo deseo.</p>
<pre><code>  Nota: 
  * Aunque no son exactamente lo mismo, escuchará library, biblioteca o paquete para referirse a estas bibliotecas (traducción al español de library). 
  * Para utilizar las funciones anteriores, deberá sustituir *library_name* por el nombre de la biblioteca (*library*) que corresponda, y *function_name* por la función de dicha librería que desee utilizar.
  </code></pre>
<p>Instalar un paquete implica copiar una serie de archivos en su ordenador en una carpeta ubicada en un subdirectorio bajo la carpeta de R, es decir es un <em>hecho físico constatable</em>.</p>
<pre><code>Nota: Se puede cambiar la ubicación pero de momento recomendamos que deje a R instalarlos en la ubicación por defecto que contiene todas las bibliotecas [*libraries*]). Para ver qué librerías tenemos instaladas, podemos utilizar la función *installed.packages()*. Verá que pueden estar en diferentes ubicaciones.</code></pre>
<p>Cargar la librería es ponerla en una zona de memoria que la hace disponible, de forma que basta con llamar a las funciones. En realidad se puede llamar a las funciones sin cargar la librería, pero deberemos llamarla cada vez que ejecutemos una de las funciones que contenga. Para esto se usa la expresión <em>library_name::function()</em>.</p>
</section>
<section id="tipos-de-objetos-en-r-los-básicos." class="level3">
<h3 class="anchored" data-anchor-id="tipos-de-objetos-en-r-los-básicos.">Tipos de objetos en R (los básicos).</h3>
<ul>
<li><p><strong>Escalar</strong>.</p></li>
<li><p><strong>Array</strong>: Agrupación multidimiensional de vectores. Todos elementos del mismo tipo.</p></li>
<li><p><strong>Vectores</strong>: Numéricos, Lógicos, Cadenas, Factores. Como es Array-&gt;todos elementos del mismo tipo</p></li>
<li><p><strong>Matrices (matrix)</strong>. Array de dim=2. Como es Array-&gt;todos elementos del mismo tipo.</p></li>
<li><p><strong>dataframes (data.frame)</strong>. Matrices que pueden contener elementos de varios tipos, pero todos de la misma longitud.</p></li>
<li><p><strong>Listas (list)</strong>. Elementos puedes ser de diferentes tipos y longitudes.</p></li>
<li><p><strong>Funciones (function)</strong>: conjunto de código de R ejecutable y parametrizable.</p>
<p>Nota: Todos los objetos tienen atributos length y mode. Los arrays además tienen dim.</p></li>
</ul>
</section>
<section id="sobre-el-código-en-r." class="level3">
<h3 class="anchored" data-anchor-id="sobre-el-código-en-r.">Sobre el código en R.</h3>
<ul>
<li><p>Las funciones se pueden separar por “;” o por un salto de línea.</p></li>
<li><p>Se puede escribir en más de una línea y se pueden agrupar “{}” dentro de una función.</p></li>
<li><p>El carácter para comentar código en R es <em>#</em> {<span class="math inline">\(Hash\)</span>}. Evita que se ejecute una o varias líneas de código, y por tanto también permite introducir líneas de texto que nos ayuden recordar por qué creamos el código de esa manera. Es lo que llamaremos “comentar el código”</p></li>
<li><p>Es importante recordar que el código es:</p>
<ul>
<li>Case-sensitive: Sensible a mayúsculas y minúsculas: Norm es diferente de norm. - Completo (multilinea): El código ha de estar completo para ser ejecutado</li>
<li>Coherente. () []: Los paréntesis han de ser coherentes (cada apertura su cierre).</li>
<li>Cuidado con caracteres reservados: =, $, &amp;, *, o prohibidos ä,ü,í,…: Reservados para cometidos concretos, mejor evitar ñ y otros caracteres “extraños”.</li>
</ul></li>
</ul>
</section>
</section>
<section id="primer-script." class="level2">
<h2 class="anchored" data-anchor-id="primer-script.">Primer script.</h2>
<p>Abre una pestaña para crear tu primer script. Lo puedes hacer desde el menú <em>File/New File/R script</em> o con el método de teclado abreviado <em>Ctrl+May+N</em><a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>.</p>
<p>Se abrirá una pestaña que señala el nuevo script. Pegue en ese espacio el siguiente código:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(car) <span class="co"># carga la biblioteca, que a su vez permite el acceso a los datos de una base de datos sobre coches.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'car' was built under R version 4.3.1</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: carData</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'carData' was built under R version 4.3.1</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'car'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:dplyr':

    recode</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:purrr':

    some</code></pre>
</div>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(cars) <span class="co"># resume los datos.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     speed           dist       
 Min.   : 4.0   Min.   :  2.00  
 1st Qu.:12.0   1st Qu.: 26.00  
 Median :15.0   Median : 36.00  
 Mean   :15.4   Mean   : 42.98  
 3rd Qu.:19.0   3rd Qu.: 56.00  
 Max.   :25.0   Max.   :120.00  </code></pre>
</div>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(cars) <span class="co"># construye un gráfico con los datos.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Sesion2_lect_files/figure-html/unnamed-chunk-1-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Como ve, aunque es cierto que las funciones están en inglés. el código de R es bastante comprensible.</p>
<p>Puede salvar el script pulsando el disquete azul bajo la pestaña…</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="pics/Salvar_script.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Save script</figcaption><p></p>
</figure>
</div>
<p>… o más fácil, con la combinación de teclas Ctrl+s.</p>
<p>Las personas que utilizamos R para enseñar estadística tenemos diferentes opiniones sobre si debemos enseñar a utilizar lo que llamamos <em>base R</em>, las funciones más básicas de r, en su mayoría incluidas en un paquete llamado <em>base</em>, o si es mejor ir directamente hacia lo que llamamos <em>modern R</em>, que utiliza algo llamado pipes (<em>%&gt;%</em>) que simplifica enormemente el código necesario para realizar tareas complejas. De hecho, aunque prácticamente todo se podría construir on rbase, el uso del denominado <em>tidyverse</em> (que incluye un conjunto de paquetes bajo esta filosofía) agiliza mucho el trabajo, por lo que es con lo que todos finalmente trabajamos.</p>
<p><strong>¿Merece la pena aprender algo de rbase?</strong></p>
<p>En mi opinión sí, porque aunque utilices pipes, de vez en cuando afloran conceptos básicos. Otros profesores opinan que es mejor llevar al alumno directamente al <strong>tidyverse</strong> porque al final es lo que vais a utilizar. Entender conceptos como la indexación, los tipos de objetos, las clases de vectores… te ayuda a entender y solucionar los problemas que seguro aparecerán, los mensajes de error y sobre todo las soluciones que encontrarás en los blogs dedicados a este tema.</p>
<p>Las próximas líneas están dedicadas a mostrar algunos comandos muy básicos que ayudan a entender los diferentes objetos y estructuras aunque luego muchas de estas funciones permanecerán escondidas en el interior de funciones más complejas contenidas en otros paquetes.</p>
</section>
<section id="creación-de-objetos." class="level2">
<h2 class="anchored" data-anchor-id="creación-de-objetos.">Creación de objetos.</h2>
<p>Anteriormente hemos mencionado algunos de los objetos habitualmente utilizados en R. Ahora vamos a aprender a crearlos.</p>
<p>Esto es una expresión…que devuelve un resultado. No ha creado un objeto.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span><span class="sc">+</span><span class="dv">3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 8</code></pre>
</div>
</div>
<p>Y esto es una asignación, que <strong>crea un objeto</strong> (en el ejemplo un escalar con nombre <em>x</em>), en el que almacenamos el/los resultado/s (o la función) de, en este caso, una suma. El objeto se almacena en memoria y se lo puede llamar en cualquier momento.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>x<span class="ot">&lt;-</span><span class="dv">5</span><span class="sc">+</span><span class="dv">3</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>x</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 8</code></pre>
</div>
</div>
<p>Las funciones utilizan estos objetos para generar nuevos objetos, pero hay algunas funciones básicas que nos ayudan a gestionar estos objetos en nuestro espacio de trabajo<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a>.</p>
<p>Mencionaré tres de ellas<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a>:</p>
<ul>
<li><em>c()</em>: Concatena elementos y crea un vector, uno de los objetos más sencillos en R.</li>
<li><em>ls()</em>: Lista los objetos en el espacio de trabajo.</li>
<li><em>rm()</em>: Elimina objetos del espacio.</li>
</ul>
<p>Ejemplo de uso:</p>
<section id="array-vector-matrix-array" class="level3">
<h3 class="anchored" data-anchor-id="array-vector-matrix-array">Array (vector, matrix, array)</h3>
<p>Un array contiene un conjunto de elementos (números o caracteres) del mismo tipo en una estructura ordenada. En función de las dimensiones puede ser un vector (1 dimensión), una matrix (2 dimensiones) o un array (3 dimensiones). <strong>Importante: Solo puede contener elementos del mismo tipo</strong></p>
<section id="vectores." class="level4">
<h4 class="anchored" data-anchor-id="vectores.">Vectores.</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>y<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="dv">4</span>,<span class="dv">8</span>,<span class="dv">22</span>,<span class="dv">32</span>,<span class="dv">25</span>) <span class="co">#crea un vector de 5 elementos que son números (escalares)</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>y <span class="co"># llamamos al objeto para que lo devuelva.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  4  8 22 32 25</code></pre>
</div>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>names<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="st">'Juan'</span>,<span class="st">'Luis'</span>,<span class="st">'Mónica'</span>,<span class="st">'Julia'</span>) <span class="co">#Genera un vector que contiene cadenas de caracteres.</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>names <span class="co">#llamamos al objeto para que lo devuelva.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Juan"   "Luis"   "Mónica" "Julia" </code></pre>
</div>
</div>
<pre><code>Como se puede observar en el código anterior, hay una parte del texto detrás del carácter **#**. Todos los lenguajes de programación utilizan caracteres para "comentar" texto. El *texto comentado* no se considera parte del código, por lo que sirve para, por ejemplo, dejar explicaciones de por qué cierta parte del código se escribió de una determinada manera, o para que cierto fragmento del código no se ejecute.</code></pre>
<p>Obtener la lista de objetos en nuestro espacio de trabajo es así de sencillo.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "names" "x"     "y"    </code></pre>
</div>
</div>
<p>Y eliminarlos también.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(names)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Comprobamos que lo ha eliminado.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "x" "y"</code></pre>
</div>
</div>
<p>Algunas funciones nos ayudan a crear vectores de manera más rápida. Aquí van algunos ejemplos que nos pueden ser útiles más adelante, por ejemplo cuando hablemos de indexación:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>a1<span class="ot">&lt;-</span><span class="fu">rep</span>(<span class="dv">1</span>,<span class="dv">20</span>) <span class="co">#Repitiendo elementos.</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>b<span class="ot">&lt;-</span><span class="fu">seq</span>(<span class="dv">1</span>,<span class="dv">20</span>,<span class="dv">2</span>)  <span class="co"># Construyendo sucesiones, por ejemplo aritmética de distancia 2 comenzando el el 1.</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>d<span class="ot">&lt;-</span><span class="dv">27</span><span class="sc">:</span><span class="dv">42</span> <span class="co">#cuando la distancia es uno se puede abreviar así.</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>vecnam.rep<span class="ot">&lt;-</span><span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">'Julia'</span>,<span class="st">'Óscar'</span>),<span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Incluso podemos combinar (anidar) funciones.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>a2<span class="ot">&lt;-</span><span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>,<span class="dv">10</span>) <span class="co">#Repitiendo elementos</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>a2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 1 2 3 1 2 3 1 2 3 1 2 3 1 2 3 1 2 3 1 2 3 1 2 3 1 2 3 1 2 3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># En realidad estamos anidando la función seq dentro de la función rep. </span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>a2<span class="fl">.1</span> <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="fu">seq</span>(<span class="dv">1</span>,<span class="dv">3</span>),<span class="dv">10</span>)</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>a2<span class="fl">.1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 1 2 3 1 2 3 1 2 3 1 2 3 1 2 3 1 2 3 1 2 3 1 2 3 1 2 3 1 2 3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>a3<span class="ot">&lt;-</span><span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>,<span class="at">each=</span><span class="dv">10</span>) <span class="co">#Repitiendo elementos, pero de otra manera.</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>a3</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 1 1 1 1 1 1 1 1 1 1 2 2 2 2 2 2 2 2 2 2</code></pre>
</div>
</div>
<p>Como hemos visto anteriormente, existen objetos de muchos tipos: Array, matriz, vector (en realidad estos dos últimos son tipos de array), lista, dataframe…. Cuando se crean, almacenan y eliminan igual que los vectores del ejemplo anterior, indepedientente de lo complejos o grandes que sean.</p>
</section>
<section id="matrices." class="level4">
<h4 class="anchored" data-anchor-id="matrices.">Matrices.</h4>
<p>En el siguiente ejemplo, vamos a crear una matriz. Esto nos servirá para explicar un concepto importante, la indexación de elementos.</p>
<p>Creación de una matriz.</p>
<p>Generamos una matriz don dos columnas (a partir de los elementos calcula las filas necesarias), llamada m1. Por defecto los elementos se van introduciendo en la matriz columna a columna.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>m1<span class="ot">&lt;-</span><span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">5</span>,<span class="dv">8</span>,<span class="dv">9</span>,<span class="dv">20</span>,<span class="dv">5</span>,<span class="dv">8</span>,<span class="dv">9</span>),<span class="at">ncol=</span><span class="dv">2</span>) </span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>m1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2]
[1,]    2   20
[2,]    5    5
[3,]    8    8
[4,]    9    9</code></pre>
</div>
</div>
<p>Pero podemos cambiar la forma en la que los introduce, basta con utilizar un nuevo argumento <em>byrow</em> para que la rellene línea a línea.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>m2<span class="ot">&lt;-</span><span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">5</span>,<span class="dv">8</span>,<span class="dv">9</span>,<span class="dv">20</span>,<span class="dv">5</span>,<span class="dv">8</span>,<span class="dv">9</span>),<span class="at">ncol=</span><span class="dv">2</span>,<span class="at">byrow =</span> T) </span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>m2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2]
[1,]    2    5
[2,]    8    9
[3,]   20    5
[4,]    8    9</code></pre>
</div>
</div>
<p>Como se puede observar, en los bordes aparecen las coordenadas. Al ser un objeto bidimensional el primer espacio hace referencia a la fila y el segundo a la columna:<em>[fila,columna]</em></p>
<p>En el caso del vector, que solo tiene una dimensión, no habría el elemento columna.</p>
<p>Pues bien, indexar un objeto significa poder llamar a subconjuntos dentro del mismo utilizando las coordenadas.</p>
<p>Indexando un vector.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>a2[<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">6</span>)] <span class="co">#extrae elementos que ocupan las posiciones 1,2 y 6 en el vector.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2 3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>vecnam.rep[<span class="fu">seq</span>(<span class="dv">1</span>,<span class="dv">8</span>,<span class="dv">2</span>)] <span class="co">#extrae elemantos que ocupan las posiciones del 1 a 8, pero saltando de 2 en 2 (1,3,5,7)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Julia" "Julia" "Julia" "Julia"</code></pre>
</div>
</div>
<p>Indexando una matriz.</p>
<p>La indexación también nos permite extraer una parte de una matriz. Puede ser un conjunto de columnas, un conjunto de filas, o las celdas <em>([fila,columna)]</em> que le indiquemos.</p>
<p>En el siguiente código se muestran varios ejemplos.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>m1 <span class="co">#Esta es la matriz que creamos anteriormente.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2]
[1,]    2   20
[2,]    5    5
[3,]    8    8
[4,]    9    9</code></pre>
</div>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>m1[<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>),] <span class="co"># Extraigo filas 1 y 2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2]
[1,]    2   20
[2,]    5    5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>m1[,<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>)] <span class="co"># Extraigo columnas 1 y 2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2]
[1,]    2   20
[2,]    5    5
[3,]    8    8
[4,]    9    9</code></pre>
</div>
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>m1[<span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">4</span>),<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>)] <span class="co"># Extraigo un subconjunto de celdas.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2]
[1,]    8    8
[2,]    9    9</code></pre>
</div>
</div>
</section>
<section id="array." class="level4">
<h4 class="anchored" data-anchor-id="array.">Array.</h4>
<p>Se pueden crear objetos con más de dimensiones, pero no vais a encontrar muchos ejemplos en el uso habitual.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>ar<span class="ot">&lt;-</span><span class="fu">array</span>(<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">4</span>,<span class="dv">4</span>,<span class="dv">8</span>,<span class="dv">9</span>,<span class="dv">9</span>,<span class="fl">9.8</span>,<span class="dv">9</span>,<span class="dv">8</span>,<span class="dv">9</span>,<span class="fl">9.2</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">9</span>,<span class="dv">10</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">8</span>),<span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">2</span>)) <span class="co">#Esto es un array de 2 filas (primera dimension), 3 columnas (segunda dimensión), 2 bloques (tercera dimension)</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>ar</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>, , 1

     [,1] [,2] [,3]
[1,]    1    4    9
[2,]    4    8    9

, , 2

     [,1] [,2] [,3]
[1,]  9.8    8  9.2
[2,]  9.0    9  4.0</code></pre>
</div>
</div>
<p>Como no son de uso habitual, no profundizaré en su uso. Como podéis ver, elementos del mismo tipo, en este caso numéricos, pero podrían ser caracteres (texto).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>ar2 <span class="ot">&lt;-</span> <span class="fu">array</span>(<span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">'red'</span>,<span class="st">'yellow'</span>,<span class="st">'green'</span>),<span class="dv">6</span>),<span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">2</span>))</span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>ar2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>, , 1

     [,1]     [,2]    [,3]    
[1,] "red"    "green" "yellow"
[2,] "yellow" "red"   "green" 

, , 2

     [,1]     [,2]    [,3]    
[1,] "red"    "green" "yellow"
[2,] "yellow" "red"   "green" </code></pre>
</div>
</div>
<p>Como veis ha producido un array con las mismas dimensiones pero ahora contiene texto.</p>
<p>Por cierto, puede que os llame la atención que al utilizar nombres de colores en inglés el texto aparece del color correspondiente. Esta mejora se incluyó en una de las recientes versiones de RStudio y es porque este vector con colores se puede utilizar al definir colores en un gráfico<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a></p>
<p>Soy consciente de que hasta aquí puede no haber visto la utilidad de lo expuesto, pero créeme que si entiende estos conceptos, te serán de utilidad cuando trabajes con datos.</p>
<p>Así llegamos un objeto clave para el análisis de datos con R: <strong>el dataframe</strong>.</p>
</section>
</section>
<section id="dataframe" class="level3">
<h3 class="anchored" data-anchor-id="dataframe">Dataframe</h3>
<p>Como ya comentamos se trata de una estructura con forma de matriz (todos los vectores han de tener la misma longitud), pero a diferencia de esta, <strong>un dataframe sí puede contener información de distinto tipo</strong>, fundamentalmente números (integer o numeric), de caracteres (texto), lógicos (TRUE/FALSE) y factores (este último será la forma en la que recomendaremos guardar variables categóricas y por su especificidad le dedicaremos un epígrafe propio).</p>
<p>El dataframe es la estructura en la que vamos a almacenar nuestros datos, por lo que, aunque se pueden construir desde la combinación de matrices o vectores, lo frecuente es que los construyamos importando datos desde otros archivos (.csv, .xlsx,…).</p>
<p>Al tratarse de una estructura matricial, le es aplicable lo que hemos comentado sobre la indexación de matrices, pero veremos que para <em>llamar</em> a subconjuntos dentro del dataframe, podemos utilizar otros recursos y no solo un vector de posiciones.</p>
<p>En vez de hacerlo así, vamos a cargar datos que ya contiene R. R contiene muchos ejemplos de datos que van incluidos en las diferentes librerías y a los que podemos llamar.</p>
<p>Uno que se usa mucho para poner ejemplos es Iris que contiene información sobre tres especies de flores acompañadas de sus características (longitud y anchura de pétalos y sépalos).</p>
<p>Para llamarlo basta con escribir esto:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(iris) <span class="co">#basta con esto porque este dataset se incluye en la librería datasets que se instala por defecto en la instalación de base.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Si quisiéramos llamar a un dataset contenido dentro de otro paquete, deberíamos hacerlo así.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(Anscombe,<span class="at">package=</span><span class="st">'carData'</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>La primera vez que cargamos unos datos de esta manera, en el entorno (pestaña Environment del panel superior derecho [si no se ha cambiado la colocación de los paneles en las opciones de RStudio]) aparecerá el nombre en el apartado ‘Values’ y al lado <promise> junto con el resto de objetos que hemos ido creando.</promise></p>
<p><img src="pics/Promise.png" class="img-fluid"></p>
<p>Si está en Promise, el dataset todavía no está cargado. Para que cargue hemos de llamarlo una primera vez.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(iris) <span class="co"># solo pedimos los primeros registros (son 50)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Sepal.Length Sepal.Width Petal.Length Petal.Width Species
1          5.1         3.5          1.4         0.2  setosa
2          4.9         3.0          1.4         0.2  setosa
3          4.7         3.2          1.3         0.2  setosa
4          4.6         3.1          1.5         0.2  setosa
5          5.0         3.6          1.4         0.2  setosa
6          5.4         3.9          1.7         0.4  setosa</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(Anscombe) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   education income young urban
ME       189   2824 350.7   508
NH       169   3259 345.9   564
VT       230   3072 348.5   322
MA       168   3835 335.3   846
RI       180   3549 327.1   871
CT       193   4256 341.0   774</code></pre>
</div>
</div>
<p>Y es entonces cuando pasa al conjunto <em>Data</em>.</p>
<p><img src="pics/Promise2.png" class="img-fluid"></p>
<p>En algunos ejemplos utilizaremos estos datos <em>“precargados”</em> en R, de ahí la explicación anterior, pero en general los datos serán importados desde archivos externos.</p>
<p>Como comentábamos, el dataframe puede indexarse como hacíamos con la matriz.</p>
<p>Solo columnas 2 y 3 de las primeras 6 filas. Las 6 filas las impone <em>head</em> por defecto. Sin usar <em>head()</em>, mostraría todas.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(iris[,<span class="dv">2</span><span class="sc">:</span><span class="dv">3</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Sepal.Width Petal.Length
1         3.5          1.4
2         3.0          1.4
3         3.2          1.3
4         3.1          1.5
5         3.6          1.4
6         3.9          1.7</code></pre>
</div>
</div>
<p>Seleccionamos los registros (ejemplares) 4 y 10, y las colunas 2 y 3 del datarame.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>iris[<span class="fu">c</span>(<span class="dv">4</span>,<span class="dv">10</span>),<span class="dv">2</span><span class="sc">:</span><span class="dv">3</span>] <span class="co">#</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Sepal.Width Petal.Length
4          3.1          1.5
10         3.1          1.5</code></pre>
</div>
</div>
<p>Al tratarse de un dataframe, podemos llamar a las columnas, en última instancia las variables contenidas en nuestro dataset, por su nombre. Para ello utilizaremos un vectore de cadenas de texto (character).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>iris[<span class="fu">c</span>(<span class="dv">4</span>,<span class="dv">10</span>),<span class="fu">c</span>(<span class="st">"Sepal.Width"</span>,<span class="st">"Sepal.Length"</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Sepal.Width Sepal.Length
4          3.1          4.6
10         3.1          4.9</code></pre>
</div>
</div>
<p>Otra forma de llamar a una variable concreta es utilizando el carácter reservado <em>$</em>. Para ello comenzamos con el nombre del dataframe y separadmos el nombre de la variable mediante el símbolo del $.</p>
<pre><code>En realidad esta forma de llamar a partes de un objeto (utilizando $ como separador), se utiliza también en otros objetos más complejos.</code></pre>
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>iris<span class="sc">$</span>Sepal.Length</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] 5.1 4.9 4.7 4.6 5.0 5.4 4.6 5.0 4.4 4.9 5.4 4.8 4.8 4.3 5.8 5.7 5.4 5.1
 [19] 5.7 5.1 5.4 5.1 4.6 5.1 4.8 5.0 5.0 5.2 5.2 4.7 4.8 5.4 5.2 5.5 4.9 5.0
 [37] 5.5 4.9 4.4 5.1 5.0 4.5 4.4 5.0 5.1 4.8 5.1 4.6 5.3 5.0 7.0 6.4 6.9 5.5
 [55] 6.5 5.7 6.3 4.9 6.6 5.2 5.0 5.9 6.0 6.1 5.6 6.7 5.6 5.8 6.2 5.6 5.9 6.1
 [73] 6.3 6.1 6.4 6.6 6.8 6.7 6.0 5.7 5.5 5.5 5.8 6.0 5.4 6.0 6.7 6.3 5.6 5.5
 [91] 5.5 6.1 5.8 5.0 5.6 5.7 5.7 6.2 5.1 5.7 6.3 5.8 7.1 6.3 6.5 7.6 4.9 7.3
[109] 6.7 7.2 6.5 6.4 6.8 5.7 5.8 6.4 6.5 7.7 7.7 6.0 6.9 5.6 7.7 6.3 6.7 7.2
[127] 6.2 6.1 6.4 7.2 7.4 7.9 6.4 6.3 6.1 7.7 6.3 6.4 6.0 6.9 6.7 6.9 5.8 6.8
[145] 6.7 6.7 6.3 6.5 6.2 5.9</code></pre>
</div>
</div>
<p>Esto será muy útil para crear nuevas variables en el dataframe. Aunque lo veremos con más detenimiento en la siguiente sesión, incluyo aquí algún ejemplo básico porque ayuda a entender cómo funciona en el dataframe.</p>
<p>Por ejemplo, imaginemos que deseamos crear la razón entre la longitud y la anchura de los sépalos.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>iris<span class="sc">$</span>Sepal.Ratio <span class="ot">&lt;-</span> iris<span class="sc">$</span>Sepal.Length<span class="sc">/</span>iris<span class="sc">$</span>Sepal.Width</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Como podemos observar, el dataframe iris contiene ahora una nueva variable llamada <strong>sepal.ratio</strong>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>iris[<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>,<span class="fu">c</span>(<span class="st">"Sepal.Length"</span>,<span class="st">"Sepal.Width"</span>,<span class="st">"Sepal.Ratio"</span>)] <span class="co">#limito el número de filas utilizando un vector como índice.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Sepal.Length Sepal.Width Sepal.Ratio
1          5.1         3.5    1.457143
2          4.9         3.0    1.633333
3          4.7         3.2    1.468750
4          4.6         3.1    1.483871</code></pre>
</div>
</div>
<p>Para eliminar una variable del data frame, basta con que asignemos NULL al vector correspondiente.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>iris<span class="sc">$</span>Sepal.Ratio<span class="ot">&lt;-</span><span class="cn">NULL</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Una vez hemos visto lo básico sobre cómo manejarse con un dataframe, en la siguiente sesión aprenderemos a importar uno.</p>
</section>
<section id="listas." class="level3">
<h3 class="anchored" data-anchor-id="listas.">Listas.</h3>
<p>La <em>lista</em> es un objeto que a pesar de su utilidad cuesta comprender cuando estás empezando a trabajar con R. En cierto modo es un contenedor porque puede almacenar otros objetos de diferente tipo (vectores, arrays, dataframes, gráficos) en su interior. Además, en muchas funciones, alguno de los argumentos es de tipo lista y muchas otras devuelven objetos de tipo lista.</p>
<p>¿Se puede vivir sin comprender qué es una lista en R? Sí, pero no manejarse algo con ellas limita mucho tu crecimiento posterior. En un curso de iniciación como este, solo pondré un ejemplo para ilustrar su funcionamiento, pero no te preocupes si en este momento no comprendes del todo su funcionamiento.</p>
<p>En este ejemplo voy a generar un vector, una matriz, un dataframe y un gráfico<a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a> y los voy a incluir en una lista.</p>
<pre><code>En el ejemplo voy a utilizar funciones para generar vectores aleatorios siguiendo distribuciones de probabilidad teórica concretas (en el ejemplo una normal y una binomial). No es necesario entender su funcionamiento para comprender el ejemplo, basta con saber que crean vectores de 50 elementos que serán  las variables del dataframe simulado.</code></pre>
<div class="cell">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a>v1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">'Juan'</span>, <span class="st">'Pedro'</span>,<span class="st">'Luisa'</span>)</span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a>m1 <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">5</span>,<span class="dv">7</span>,<span class="dv">22</span>,<span class="dv">45</span>,<span class="dv">76</span>,<span class="dv">25</span>,<span class="dv">22</span>,<span class="dv">21</span>),<span class="at">ncol=</span><span class="dv">3</span>)</span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a>df1 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">id=</span><span class="dv">1001</span><span class="sc">:</span><span class="dv">1050</span>,<span class="at">pas=</span><span class="fu">round</span>(<span class="fu">rnorm</span>(<span class="dv">50</span>,<span class="dv">120</span>,<span class="dv">5</span>)),<span class="at">sex=</span><span class="fu">factor</span>(<span class="fu">rbinom</span>(<span class="dv">50</span>,<span class="dv">1</span>,.<span class="dv">35</span>),<span class="at">labels=</span><span class="fu">c</span>(<span class="st">'Hombre'</span>,<span class="st">'Mujer'</span>)))</span>
<span id="cb74-4"><a href="#cb74-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-5"><a href="#cb74-5" aria-hidden="true" tabindex="-1"></a><span class="fu">plot.new</span>()</span>
<span id="cb74-6"><a href="#cb74-6" aria-hidden="true" tabindex="-1"></a><span class="fu">barplot</span>(<span class="fu">table</span>(df1<span class="sc">$</span>sex))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Sesion2_lect_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> <span class="fu">recordPlot</span>()</span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"></a>lista1 <span class="ot">&lt;-</span> <span class="fu">list</span>(v1,m1,df1,p1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Si analizamos su estructura, vemos que tiene cuatro elementos.</p>
<pre><code>Utilizo el argumento max.level para limitar la información que muestra sobre la lista. El tercer elemento es muy grande y si lo muestra entero ocuparía mucho espacio. De hecho, como se puede ver, ha convertido el gráfico en ¡otra lista!</code></pre>
<div class="cell">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(lista1,<span class="at">max.level =</span> <span class="dv">1</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>List of 4
 $ : chr [1:3] "Juan" "Pedro" "Luisa"
 $ : num [1:3, 1:3] 3 5 7 22 45 76 25 22 21
 $ :'data.frame':   50 obs. of  3 variables:
 $ :List of 3
  ..- attr(*, "engineVersion")= int 16
  ..- attr(*, "pid")= int 12580
  ..- attr(*, "Rversion")=Classes 'R_system_version', 'package_version', 'numeric_version'  hidden list of 1
  ..- attr(*, "load")= chr(0) 
  ..- attr(*, "attach")= chr(0) 
  ..- attr(*, "class")= chr "recordedplot"</code></pre>
</div>
</div>
<p>Como inica la estructura, es una lista de 4 elementos, el vector, una matriz 3x3, un dataframe de 50 observaciones y tres variables , y un cuarto elemento que es otra lista y que al ser llamado, devolverá el gráfico.</p>
<p>Una vez creada, podemos acceder (llamar) a los elementos de la lista utilizando índices, pero las listas necesitan doble corchete (<strong>[[]]</strong>) para ser indexadas.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a>lista1[[<span class="dv">4</span>]] <span class="co">#Esto llamaría al cuarto elemento de la lista, que era el gráfico.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Sesion2_lect_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Los elementos de las listas pueden también tener nombres y ser llamados por ellos. Esta lista no los tiene, pero se le pueden asignar utilizando un simple vector (recordad que en R hay muchas estructuras vectoriales).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(lista1) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">'mi_vector'</span>,<span class="st">'mi_matriz'</span>,<span class="st">'mi_dataframe'</span>,<span class="st">'mi_gráfico'</span>)<span class="co">#este vector asigna nombres a los elementos. Ha de ser de la misma longitud que el número de elementos.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Ahora podemos usar el nombre para llamar a los elementos de la lista, parecido a lo que hacíamos para llamar a las variables dentro de un dataframe.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(lista1<span class="sc">$</span>mi_dataframe,<span class="at">n =</span> <span class="dv">10</span>) <span class="co">#Uso head con al argumento n=10 para que solo muestre las 10 primeras filas.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     id pas    sex
1  1001 119 Hombre
2  1002 118 Hombre
3  1003 117  Mujer
4  1004 122  Mujer
5  1005 123 Hombre
6  1006 119  Mujer
7  1007 117  Mujer
8  1008 120 Hombre
9  1009 116 Hombre
10 1010 120 Hombre</code></pre>
</div>
</div>
</section>
<section id="funciones-un-par-de-palabras" class="level3">
<h3 class="anchored" data-anchor-id="funciones-un-par-de-palabras">Funciones (un par de palabras)</h3>
<p>A lo largo de esta sesión, de manera más o menos consciente, habéis trabajado con funciones. Estas funciones están contenidas en las librerías que hemos mencionado al inicio de la sesión. Podemos generar nuestras propias funciones, pero en mi opinión es preferible introducir su creación en clases más avanzadas.</p>
<p>Aunque es cierto que cuando eres capaz de crear una función entiendes mejor su funcionamiento, no es necesario saber hacerlo para utilizarlas correctamente, pero sí es necesario comentar, aunque sea brevemente, su estructura.</p>
<p>Como hemos comentado, cuando la librería está cargada (recordad que se cargan con la función library<a href="#fn6" class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a>), basta con llamar a la función para ejecutarla. Como habéis visto, el nombre de la función va seguido de unos paréntesis que contienen lo que llamamos <em>“argumentos”</em>. Los argumentos nos permiten personalizar la función al objetivo. Cada argumento tiene un nombre, y en muchos casos un valor por defecto. En el fondo la forma de llamar (ejecutar) la función se parece estructuralmente a un vector en el que cada elemento tiene un nombre y el valor de cada argumento es utilizado para ejecutar la función.</p>
<p>En muchos casos podemos ver el código detras de una función<a href="#fn7" class="footnote-ref" id="fnref7" role="doc-noteref"><sup>7</sup></a>. Por ejemplo, este sería el código que ejecuta la función ls()</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a>ls <span class="co">#Para poder verlo he de ejecutar la función sin argumentos, sin el contenido de los paréntesis.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>function (name, pos = -1L, envir = as.environment(pos), all.names = FALSE, 
    pattern, sorted = TRUE) 
{
    if (!missing(name)) {
        pos &lt;- tryCatch(name, error = function(e) e)
        if (inherits(pos, "error")) {
            name &lt;- substitute(name)
            if (!is.character(name)) 
                name &lt;- deparse(name)
            warning(gettextf("%s converted to character string", 
                sQuote(name)), domain = NA)
            pos &lt;- name
        }
    }
    all.names &lt;- .Internal(ls(envir, all.names, sorted))
    if (!missing(pattern)) {
        if ((ll &lt;- length(grep("[", pattern, fixed = TRUE))) &amp;&amp; 
            ll != length(grep("]", pattern, fixed = TRUE))) {
            if (pattern == "[") {
                pattern &lt;- "\\["
                warning("replaced regular expression pattern '[' by  '\\\\['")
            }
            else if (length(grep("[^\\\\]\\[&lt;-", pattern))) {
                pattern &lt;- sub("\\[&lt;-", "\\\\\\[&lt;-", pattern)
                warning("replaced '[&lt;-' by '\\\\[&lt;-' in regular expression pattern")
            }
        }
        grep(pattern, all.names, value = TRUE)
    }
    else all.names
}
&lt;bytecode: 0x0000022f3a333820&gt;
&lt;environment: namespace:base&gt;</code></pre>
</div>
</div>
<p>Al principio el código es ininteligible, pero según vas aprendiendo, y especialmente cuando diseñas tus propias funciones, es cada vez más <em>lógico</em>, al fin y al cabo se trata de comunicarse con una máquina.</p>
<p>Pero lo que nos interesa es que comprendáis la gramática que esconde una función. Aquí la ayuda es de gran valor.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a> ?ls <span class="co">#Pido ayuda sobre la función, por eso utilizo solo un ?</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Al ejecutarlo, debería aparecer algo como esto en la pestaña Help del panel inferior derecho (si no se ha cambiado la configuración predeterminada):</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="pics/ejemplo_ayuda_ls.png" class="figure-img"></p>
<p></p><figcaption class="figure-caption">Ejemplo de ayuda sobre una función</figcaption><p></p>
</figure>
</div>
<p>El primer bloque, <strong>Description</strong> describe qué hace la función<a href="#fn8" class="footnote-ref" id="fnref8" role="doc-noteref"><sup>8</sup></a>.</p>
<p>Pero me interesa más que entendáis el segundo y tercer bloque <strong>Usage</strong> y <strong>Arguments</strong>. En el bloque <strong>Usage</strong> podéis ver una parte de lo que, con permiso de los puristas, llamaría <em>gramática de R</em>. Entre paréntesis, aparecen los nombres de los argumentos y, a veces, el valor por defecto<a href="#fn9" class="footnote-ref" id="fnref9" role="doc-noteref"><sup>9</sup></a> Cuando no tiene valor por defecto es que no lo necesita obligatoriamente, pero si lo deseas puedes asignarle un valor para conseguir que la función opere con dicha especificación. ¿Cualquier valor? No. El tipo de valor que acoge(a veces es un objeto, como una matriz, un dataframe, un vector…)se explica en la sección <strong>Arguments</strong>.</p>
<p>Lo que viene ahora se explica poco, aunque se usa mucho, con frecuencia de manera inconsciente. Como os decía, estructuramente se parece mucho a un vector (en R, muchas estructuras son vectoriales), y como ocurre con los vectores, las posiciones son relevantes. Cada argumento tiene una posición reservada. Si la información que necesita el argumento se coloca en la posición reservada, la función interpreta el valor <strong>sin necesidad de que le indiques el nombre del argumento</strong>, porque está <em>donde se le espera</em>. Pero no es obligado darle los argumentos en orden, los puedes cambiar de lugar; eso sí, si los cambias de lugar, deberás indicarle a qué argumento te refieres, porque <em>ya no está donde se le esperaba</em>.</p>
<p>Por ejemplo:</p>
<p>El argumento <em>sorted</em> está en la posición 5. Es un argumento lógico (TRUE/FALSE) que sirve pare decirle que ordene el resultado de la orden listar los objetos del espacio de trabajo.</p>
<p>Si lo coloco en la posición en la que lo espera…</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span>(,,,,,<span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "a1"         "a2"         "a2.1"       "a3"         "Anscombe"  
 [6] "ar"         "ar2"        "b"          "d"          "df1"       
[11] "iris"       "lista1"     "m1"         "m2"         "p1"        
[16] "v1"         "vecnam.rep" "x"          "y"         </code></pre>
</div>
</div>
<p>… ordena por orden alfabético la lista de los objetos que hemos ido generando.</p>
<p>Lo mismo sucede si le hubiéramos indicado el nombre del argumento.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span>(<span class="at">sorted=</span><span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "a1"         "a2"         "a2.1"       "a3"         "Anscombe"  
 [6] "ar"         "ar2"        "b"          "d"          "df1"       
[11] "iris"       "lista1"     "m1"         "m2"         "p1"        
[16] "v1"         "vecnam.rep" "x"          "y"         </code></pre>
</div>
</div>
<p>Pero si le indico el valor del argumento sin el nombre del mismo, o sin colocarlo en la posición adecuada, sucede esto:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span>(<span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>La función cree que el valor TRUE es para el argumento name, que no es un argumento de tipo lógico (TRUE/FALSE).</p>
<p><em>Todas las funciones de R funcionan así</em>. Es raro que necesitemos utilizar todos los argumentos, por lo que en general acabaremos indicando el nombre y el valor solo de los argumentos necesarios para que la función haga lo que nosotros deseamos, sin embargo es frecuente encontrarse en los blogs de consulta, código en el que no se indica el argumento. Esta es la explicación.</p>
<p>Para terminar este apartado sobre objetos, solo queda decir que hay muchos otros tipos de objetos, algunas funciones crean sus propios objetos, aunque con frecuencia contienen uno o más de los que hemos visto.</p>
<p>En la siguiente sesión veremos cómo importar datos para construir un dataframe y trasnformarlo para obtener nuevas variables.</p>
</section>
</section>
</section>
</div>




<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>Aunque muchas de las funciones pueden realizarse desde los menús y la barra de herramientas de RStudio, a largo plazo es mejor aprender las combinaciones de teclas más frecuentemente utilizadas<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>El espacio de trabajo o Workspace es el lugar donde se van almacenando todos los objetos que generemos. Para salvarlos hay que guardar una <em>imagen</em> de dicho espacio de trabajo en un archivo de extensión .RData<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>Algunas de las funciones están disponibles en RStudio en forma de botones u opciones del menú contextual (el que se abre con el botón derecho del ratón), pero merece la pena ir aprendiendo el código porque realmente ahorra mucho tiempo frente al uso de <em>ventanas y botones</em>, y por otro lado, el código es reproducible, una pulsación en un botón no. Al principio se hace algo cuesta arriba, pero finalmente usamos un par de decenas con regularidad y para el resto tenemos documentación de apoyo. Solo hace falta entender <em>la gramática</em> en este nuevo lenguaje<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p>Por cierto, no es la única forma de indicar colores en R<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn5"><p>Guardar gráficos base R implica abrir el dispositivo gráfico y utilizar otra función, incluso la propia ayuda recomienda no utilizarlo para almacenar gráficos. Es más fácil utilizando los gráficos generados con ggplot. No hace falta saber hacerlo, pero lo incluyo para demostrar la versatilidad de las listas para recopilar objetos<a href="#fnref5" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn6"><p>Ejecutando en la consola <em>library(library_name)</em><a href="#fnref6" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn7"><p>Esto tiene que ver en parte con la naturaleza abierta del software libre; permite que otros desarrolladores puedan mejorar la función o crear otra a partir de ella.<a href="#fnref7" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn8"><p>Como podéis ver, sin comprender algunos conceptos como qué es un objeto, qué es un vector o qué es lo que llama environment (entorno) es difícil entender la ayuda, de ahí parte de la utilidad de enseñar esto antes de enseñar <em>modern R</em><a href="#fnref8" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn9"><p>No os fiéis del color porque depende del fondo que utilicéis en las opciones de RStudio<a href="#fnref9" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>